/* ===== Section layout with Fit-4 ===== */
:root {
  --ease-premium: cubic-bezier(.16, 1, .3, 1);
}

.products-section{
  --pad-y: clamp(24px, 5vh, 48px);
  --v-gap: 28px;
  --section-head: 0px;
  padding: var(--pad-y) 0;
  background: linear-gradient(180deg, rgba(229,231,235,.6), rgba(243,244,246,.9) 40%, transparent 100%);
  position: relative;
}

.products-section__bg{
  position: absolute; inset: 0;
  background:
    radial-gradient(60% 60% at 10% 10%, rgba(59,130,246,.07), transparent 60%),
    radial-gradient(60% 60% at 90% 0%,  rgba(20,184,166,.08), transparent 60%);
}

/* ===== Card (Compact+) ===== */
.feature-card{
  --r: 22px;
  --pad: clamp(18px, 2.2vw, 24px);
  /* новые токены расстояний */
  --gap-head-list: 16px;   /* отступ между заголовком и списком */
  --gap-list-cta: 16px;    /* отступ между списком и кнопкой */

  position: relative;
  display: flex; flex-direction: column;
  overflow: hidden;
  border-radius: var(--r);
  will-change: transform, box-shadow, opacity;
  content-visibility: auto;
  contain: layout paint style;
}

/* Fit-4: две строки карточек в первый экран */
@media (min-width: 1024px){
  .products-section[data-fit4="on"] .feature-card{
    --fit4-offset: calc(var(--pad-y) * 2 + var(--v-gap) + var(--section-head));
    --card-h: calc((100dvh - var(--fit4-offset)) / 2);
    height: clamp(236px, var(--card-h), 268px);
  }
}

/* Entry animation */
.feature-card[data-state="hidden"]{
  opacity: 0; transform: translateY(14px);
}
.feature-card[data-state="visible"]{
  opacity: 1; transform: none;
  transition: opacity .5s var(--ease-premium) var(--stagger, 0ms),
              transform .5s var(--ease-premium) var(--stagger, 0ms);
}

/* Hover overlay */
.feature-card__overlay{
  position:absolute; inset:0; border-radius: var(--r);
  background: linear-gradient(135deg, rgba(239,246,255,.45), transparent 40%, rgba(240,253,250,.35));
  opacity:0; transition: opacity .45s var(--ease-premium);
}
.feature-card:hover .feature-card__overlay{ opacity: 1; }

/* ===== Card content ===== */
.feature-card__content{
  position: relative; z-index: 3; /* выше stretched-link */
  display: flex; flex-direction: column; height: 100%;
  padding: var(--pad);
}

/* Header (слегка компактнее) */
.card__head{ display:flex; gap: 14px; align-items: center; margin-bottom: 8px; }
.card__icon{ flex: none; }
.card__icon-bg{
  width: 48px; height: 48px; border-radius: 14px;
  display:grid; place-items:center;
  background: linear-gradient(180deg, #2563eb, #14b8a6);
  box-shadow: 0 6px 16px rgba(20,184,166,.25), 0 2px 6px rgba(37,99,235,.25);
  transition: transform .35s var(--ease-premium), box-shadow .35s var(--ease-premium);
  will-change: transform;
}
.feature-card:hover .card__icon-bg{
  transform: translateY(-2px) scale(1.03);
  box-shadow: 0 10px 28px rgba(20,184,166,.35), 0 6px 16px rgba(37,99,235,.28);
}

.card__titles{ display:flex; flex-direction:column; gap:6px; min-width:0; }
.card__title{
  margin:0;
  font-weight: 700;
  font-size: clamp(18px, 1.25vw, 20px);
  line-height: 1.2;
  color:#0f172a;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.card__rule{
  display:block; width: clamp(64px, 10vw, 96px); height:2px; border-radius:2px;
  background: #e5e7eb;
}

/* Features (3 строки, по 1 строке текста) */
.card__features{
  display:grid;
  gap: 8px;                   /* список компактнее по вертикали */
  margin: var(--gap-head-list) 0 0 0; /* отступ между заголовком и списком */
  padding:0; list-style:none;
}
.card__feature{ display:flex; align-items: center; gap: 10px; min-width:0; }
.card__feature-bullet{
  flex:none; width: 18px; height: 18px; border-radius: 999px;
  display:grid; place-items:center;
  background: linear-gradient(180deg, #2563eb, #14b8a6);
}
.card__feature-text{
  font-size: 15px; line-height: 1.4; color:#374151;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}

/* Footer (CTA) — больше отступа сверху, сама кнопка ниже ростом */
.card__foot{ margin-top: auto; padding-top: var(--gap-list-cta); }

/* Компактная кнопка */
.ps-cta{
  position: relative;
  width: 100%;
  display:flex; align-items:center; justify-content: space-between;
  padding: 10px 16px;                 /* было 14x18 — стало ниже */
  border-radius: 12px;
  background: rgba(249,250,251,.9);
  border: 1px solid #e5e7eb;
  backdrop-filter: blur(8px);
  transition: transform .3s var(--ease-premium), background-color .3s var(--ease-premium), border-color .3s var(--ease-premium), box-shadow .2s ease-out;
}
.ps-cta__text{ font-weight: 600; color:#0f172a; }
.ps-cta__icon{
  width: 28px; height: 28px;          /* было 32 — стало компактнее */
  border-radius: 999px;
  display:grid; place-items:center;
  background: linear-gradient(90deg, #2563eb, #14b8a6);
  transition: transform .3s var(--ease-premium);
}
.ps-cta__line{
  position:absolute; left: 16px; right: 16px; bottom: 0;
  height: 2px; border-radius: 2px;
  background: linear-gradient(90deg, #2563eb, #14b8a6);
  transform: scaleX(0); transform-origin: left; transition: transform .35s var(--ease-premium);
}

/* Hover/focus */
.ps-cta:hover{
  transform: translateY(-1px);
  background: rgba(243,244,246,.96);
  border-color: rgba(59,130,246,.35);
}
.ps-cta:hover .ps-cta__icon{ transform: translateX(2px) scale(1.03); }
.ps-cta:hover .ps-cta__line{ transform: scaleX(1); }

.ps-cta:focus-visible{
  outline: 0;
  box-shadow:
    0 0 0 2px #fff,
    0 0 0 4px rgba(37,99,235,.9);
  border-color: rgba(37,99,235,.6);
}

/* Растянутый линк (вся карточка кликабельна, не мешает таб-циклу) */
.stretched-link{
  position:absolute; inset:0; z-index: 2;
}

/* Responsive tweaks */
@media (max-width: 767.98px){
  .feature-card{ height: clamp(220px, 32vh, 248px); }
  .card__icon-bg{ width:44px; height:44px; border-radius:12px; }
  .ps-cta{ padding: 10px 14px; border-radius: 10px; } /* ещё компактнее на мобилке */
  .ps-cta__icon{ width:26px; height:26px; }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  .feature-card,
  .feature-card__overlay,
  .card__icon-bg,
  .ps-cta,
  .ps-cta__icon{
    transition: none !important;
  }
}
