/* ===== Section layout with Fit-4 ===== */
:root {
  --ease-premium: cubic-bezier(.16, 1, .3, 1);
}

.products-section{
  --pad-y: clamp(24px, 5vh, 48px);
  --v-gap: 28px;
  --section-head: 0px;
  padding: var(--pad-y) 0;
  background: linear-gradient(180deg, rgba(229,231,235,.6), rgba(243,244,246,.9) 40%, transparent 100%);
  position: relative;
}

.products-section__bg{
  position: absolute; inset: 0;
  background:
    radial-gradient(60% 60% at 10% 10%, rgba(59,130,246,.07), transparent 60%),
    radial-gradient(60% 60% at 90% 0%,  rgba(20,184,166,.08), transparent 60%);
}

/* ===== Card (Compact+) ===== */
.feature-card{
  --r: 22px;
  --pad: clamp(16px, 2vw, 22px);
  --gap-head-list: 12px;
  position: relative;
  display: flex; flex-direction: column;
  overflow: hidden;
  border-radius: var(--r);
  content-visibility: auto;
  contain: layout paint style;
  border: 0;
  box-shadow: 0 4px 14px -4px rgba(0,0,0,.10), 0 2px 6px -2px rgba(0,0,0,.06);
  transition: box-shadow .35s var(--ease-premium), transform .35s var(--ease-premium);
  cursor: pointer;
}
.feature-card:hover{
  box-shadow: 0 6px 22px -6px rgba(0,0,0,.16), 0 3px 10px -3px rgba(0,0,0,.10);
}

/* Fit-4: две строки карточек в первый экран */
@media (min-width: 1024px){
  .products-section[data-fit4="on"] .feature-card{
    --fit4-offset: calc(var(--pad-y) * 2 + var(--v-gap) + var(--section-head));
    --card-h: calc((100dvh - var(--fit4-offset)) / 2);
    height: clamp(160px, var(--card-h), 190px);
  }

  /* Для всех карточек на десктопе, если fit4 выключен */
  .feature-card {
    --pad: clamp(14px, 1.5vw, 18px);
    height: clamp(160px, 28vh, 190px);
  }
}

/* Entry animation */
.feature-card[data-state="hidden"]{
  opacity: 0; transform: translateY(14px);
}
.feature-card[data-state="visible"]{
  opacity: 1; transform: none;
  transition: opacity .5s var(--ease-premium) var(--stagger, 0ms),
              transform .5s var(--ease-premium) var(--stagger, 0ms);
}

/* Hover overlay */
.feature-card__overlay{
  position:absolute; inset:0; border-radius: var(--r);
  background: linear-gradient(135deg, rgba(239,246,255,.45), transparent 40%, rgba(240,253,250,.35));
  opacity:0; transition: opacity .45s var(--ease-premium);
}
.feature-card:hover .feature-card__overlay{ opacity: 1; }

/* ===== Card content ===== */
.feature-card__content{
  position: relative; z-index: 3; /* визуально над ссылкой */
  display: flex; flex-direction: column; height: 100%;
  padding: var(--pad);
  pointer-events: none; /* пропускаем клики к растянутой ссылке */
}

/* Header (слегка компактнее) */
.card__head{ display:flex; gap: 14px; align-items: center; margin-bottom: 8px; }
.card__icon{ flex: none; }
.card__icon-bg{
  width: 48px; height: 48px; border-radius: 14px;
  display:grid; place-items:center;
  background: linear-gradient(180deg, #2563eb, #14b8a6);
  box-shadow: 0 6px 16px rgba(20,184,166,.25), 0 2px 6px rgba(37,99,235,.25);
  transition: transform .35s var(--ease-premium), box-shadow .35s var(--ease-premium);
  will-change: transform;
}
.feature-card:hover .card__icon-bg{
  transform: translateY(-2px) scale(1.03);
  box-shadow: 0 10px 28px rgba(20,184,166,.35), 0 6px 16px rgba(37,99,235,.28);
}

.card__titles{ display:flex; flex-direction:column; gap:6px; min-width:0; }
.card__title{
  margin:0;
  font-weight: 700;
  font-size: clamp(18px, 1.25vw, 20px);
  line-height: 1.2;
  color:#0f172a;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.card__rule{
  display:block; width: clamp(64px, 10vw, 96px); height:2px; border-radius:2px;
  background: #e5e7eb;
}

/* Features (3 строки, по 1 строке текста) */
.card__features{ display:grid; gap:6px; margin: var(--gap-head-list) 0 0 0; padding:0; list-style:none; }
.card__feature{ display:flex; align-items:center; gap:8px; min-width:0; position:relative; }
.card__feature-bullet{ flex:none; width:16px; height:16px; border-radius:4px; display:grid; place-items:center; background: linear-gradient(180deg,#2563eb,#14b8a6); }
.card__feature-text{ font-size:14px; line-height:1.35; color:#374151; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
/* модификатор последней строки со стрелкой */
.card__feature--with-action{ align-items:center; gap:8px; padding-right:4px; }
.card__feature--with-action .card__feature-text{ flex:1; }
.card__inline-arrow-btn{ flex:0 0 auto; width:32px; height:32px; border-radius:999px; display:grid; place-items:center; background:linear-gradient(90deg,#2563eb,#0ea5e9); box-shadow:0 2px 6px rgba(0,0,0,.18); transition:background .35s var(--ease-premium), box-shadow .35s var(--ease-premium); pointer-events:none; transform-origin:center bottom; will-change:transform; }
/* Hover анимация подпрыгивания (бесконечный цикл пока удерживается hover) */
.feature-card:hover .card__inline-arrow-btn{ animation:arrow-bounce .75s cubic-bezier(.33,1.4,.42,1) infinite; }

@keyframes arrow-bounce{
  0%{ transform:translateY(0) scale(1); }
  35%{ transform:translateY(-7px) scale(1.04); }
  55%{ transform:translateY(2px) scale(.97); }
  72%{ transform:translateY(-3px) scale(1.015); }
  100%{ transform:translateY(0) scale(1); }
}
.card__inline-arrow-btn:focus-visible{ outline:0; box-shadow:0 0 0 2px #fff,0 0 0 4px rgba(37,99,235,.9); }

/* удалён footer CTA */

/* Растянутый линк (вся карточка кликабельна, не мешает таб-циклу) */
.stretched-link{
  position:absolute; inset:0; z-index: 2;
}

/* Responsive tweaks */
@media (max-width: 767.98px){
  .feature-card{ height: clamp(220px, 32vh, 248px); }
  .card__icon-bg{ width:44px; height:44px; border-radius:12px; }
  .card__inline-arrow-btn{ width:30px; height:30px; }
}

/* Reduced motion: убираем прыжок */
@media (prefers-reduced-motion: reduce){
  .feature-card:hover .card__inline-arrow-btn{ animation:none; }
  .card__icon-bg{ transition: none !important; }
}
